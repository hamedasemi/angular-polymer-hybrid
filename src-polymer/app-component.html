<dom-module id="app-component">

    <link rel="import" href="app-component-style.html">

    <template>

        <style include="app-component-style"></style>

        <iron-ajax auto url="[[aboutListRequest]]" handle-as="json" on-response="aboutListResponse" on-error="aboutListError" debounce-duration="0"></iron-ajax>
        <iron-ajax auto url="[[areaRequest]]" handle-as="json" on-response="areaResponse" on-error="areaError" debounce-duration="300"></iron-ajax>
        <iron-ajax auto url="[[contractListRequest]]" handle-as="json" on-response="contractListResponse" on-error="contractListError" debounce-duration="0"></iron-ajax>
        <iron-ajax auto url="[[customerInfoRequest]]" handle-as="json" on-response="customerInfoResponse" on-error="customerInfoError" debounce-duration="300"></iron-ajax>
        <iron-ajax auto url="[[resettleStartDatesRequest]]" handle-as="json" on-response="resettleStartDateResponse" on-error="resettleStartDateError" debounce-duration="0"></iron-ajax>
        <iron-ajax auto url="[[submitContractRequest]]" handle-as="json" on-response="submitContractResponse" on-error="submitContractError" body="[[submitContractBody]]" method="POST" content-type="application/json" debounce-duration="0"></iron-ajax>

        <content></content>

        <x-media-query baseline="25.6" multiplier="10" name="xx-small"></x-media-query>
        <x-media-query baseline="25.6" multiplier="20" name="x-small"></x-media-query>
        <x-media-query baseline="25.6" multiplier="30" name="small"></x-media-query>
        <x-media-query baseline="25.6" multiplier="47" name="medium"></x-media-query>
        <x-media-query baseline="25.6" multiplier="50" name="large"></x-media-query>
        <x-media-query baseline="25.6" multiplier="60" name="x-large"></x-media-query>
        <x-media-query baseline="25.6" multiplier="70" name="xx-large"></x-media-query>
        <x-media-query baseline="25.6" multiplier="80" name="xxx-large"></x-media-query>

        <x-analytics page="[[router.stage]]" event="[[analyticsEvent]]"></x-analytics>

        <app-location route="{{route}}" query-params="{{queryParams}}"></app-location>
        <app-route route="{{route}}" pattern="/:namespace" data="{{namespaceRouter}}" tail="{{subRoute}}"></app-route>
        <app-route route="{{subRoute}}" pattern="/:stage" data="{{router}}"></app-route>

        <template is="dom-if" if="[[loadingStatus]]">
            <main-content>
                <notification-element notification="[[notification]]"></notification-element>
                <progress-bar stage="[[router.stage]]" stages="[[stages]]"></progress-bar>
                <context-column>
                    <header-section>
                        <app-stage-select stage="[[router.stage]]" header>
                            <logo-element select-on-stage="start not-found tack"></logo-element>
                            <text-button-element select-on-stage="about forbrukning postnummer pris kunduppgifter kontaktuppgifter sammanfattning" on-click="goBack"><x-icon name="icon-back-arrow" back-button></x-icon>[[localize('general.button.go-back')]]</text-button-element>
                        </app-stage-select>
                        <badge-element telephone="[[localize('contact-support-component.telephone-number')]]">[[localize('contact-support-component.short-text')]]</badge-element>
                    </header-section>
                    <app-stage-select stage="[[router.stage]]" animation="fade-in" auto-scroll main>
                        <start-component select-on-stage="start" namespace="[[namespace]]"></start-component>
                        <about-component select-on-stage="about" namespace="[[namespace]]" about-list="[[aboutList]]"></about-component>

                        <not-found-component select-on-stage="error not-found"></not-found-component>
                        <x-style-guide select-on-stage="style-guide"></x-style-guide>
                    </app-stage-select>
                    <app-stage-select stage="[[router.stage]]" footer>
                        <div select-on-stage="start"><text-element footer html="[[namespace.attributes.startFooter]]"></text-element></div>
                        <div select-on-stage="about"><text-element footer>[[localize('about-component.footer.text')]]</text-element></div>
                        <div select-on-stage="about"><text-element footer html="[[localize('JUST_A_LOCALE')]]"></text-element></div>
                    </app-stage-select>
                </context-column>
            </main-content>
            <aside-content>
                <banner-container>
                    <app-stage-select stage="[[router.stage]]" animation="slide-up" aside>
                        <text-element select-on-stage="start" banner>[[namespace.attributes.someData]]</text-element>
                        <text-element select-on-stage="about" banner>[[namespace.attributes.someData]]</text-element>
                    </app-stage-select>
                </banner-container>
            </aside-content>
        </template>
    </template>

    <script src="app-component.js"></script>

</dom-module>