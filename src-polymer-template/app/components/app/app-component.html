<script src="../../../config/dev.js"></script>
<script src="../../assets/libs/es6-promise/es6-promise.min.js"></script>
<script src="../../assets/libs/svgxuse/svgxuse.js"></script>
<script src="../../assets/libs/intl/dist/Intl.min.js"></script>
<script src="../../assets/libs/intl/locale-data/jsonp/se-SE.js"></script>

<link rel="import" href="../../assets/libs/polymer/polymer.html">
<link rel="import" href="../../assets/libs/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../assets/libs/app-route/app-location.html">
<link rel="import" href="../../assets/libs/app-route/app-route.html">

<link rel="import" href="../../shared/debug/x-debug.html">
<link rel="import" href="../../shared/app-stage-select/app-stage-select.html">
<link rel="import" href="../../shared/resource/x-resource.html">
<link rel="import" href="../../shared/media-query/x-media-query.html">
<link rel="import" href="../../shared/shared-layout/shared-layout.html">
<link rel="import" href="../../shared/shared-content/shared-content.html">
<link rel="import" href="../../shared/analytics/x-analytics.html">

<link rel="import" href="../../elements/x-icon/x-icon.html">
<link rel="import" href="../../elements/text-button/text-button-element.html">
<link rel="import" href="../../elements/text/text-element.html">
<!--<link rel="import" href="../../elements/wallpaper/wallpaper-element.html">-->
<!--<link rel="import" href="../../elements/badge/badge-element.html">-->
<link rel="import" href="../../elements/logo/logo-element.html">
<link rel="import" href="../../elements/campaign-button/campaign-button-element.html">
<!--<link rel="import" href="../../elements/progress-bar/progress-bar.html">
<link rel="import" href="../../elements/notification/notification-element.html">-->

<link rel="import" href="../el-contract-start/el-contract-start.html">
<!--<link rel="import" href="../contract-selection/contract-selection.html">-->

<dom-module id="app-component">

    <link rel="import" href="app-component-style.html">

    <template>

        <style include="app-component-style"></style>

        <iron-ajax auto url="[[originListRequest]]" handle-as="json" on-response="originListResponse" on-error="originListError" debounce-duration="0"></iron-ajax>

        <iron-ajax auto url="[[submitContractRequest]]" handle-as="json" on-response="submitContractResponse" on-error="submitContractError" body="[[submitContractBody]]" method="POST" content-type="application/json" debounce-duration="0"></iron-ajax>

        <x-media-query baseline="25.6" multiplier="10" name="xx-small"></x-media-query>
        <x-media-query baseline="25.6" multiplier="20" name="x-small"></x-media-query>
        <x-media-query baseline="25.6" multiplier="30" name="small"></x-media-query>
        <x-media-query baseline="25.6" multiplier="47" name="medium"></x-media-query>
        <x-media-query baseline="25.6" multiplier="50" name="large"></x-media-query>
        <x-media-query baseline="25.6" multiplier="60" name="x-large"></x-media-query>
        <x-media-query baseline="25.6" multiplier="70" name="xx-large"></x-media-query>
        <x-media-query baseline="25.6" multiplier="80" name="xxx-large"></x-media-query>

        <x-analytics campaign-name="[[campaign.campaignName]]" page="[[router.stage]]" event="[[analyticsEvent]]"></x-analytics>

        <app-location route="{{route}}" query-params="{{queryParams}}"></app-location>
        <app-route route="{{route}}" pattern="/:campaign" data="{{campaignRouter}}" tail="{{subRoute}}"></app-route>
        <app-route route="{{subRoute}}" pattern="/:stage" data="{{router}}"></app-route>

        <main-content>
            <!--<notification-element notification="[[notification]]"></notification-element>-->
            <!--<progress-bar stage="[[router.stage]]" stages="[[stages]]"></progress-bar>-->
            <context-column>
                <header-section>
                    <app-stage-select stage="[[router.stage]]" header>
                        <logo-element select-on-stage="start not-found tack"></logo-element>
                        <text-button-element select-on-stage="ursprung forbrukning postnummer pris kunduppgifter startdatum kontaktuppgifter sammanfattning" on-click="goBack"><x-icon name="icon-back-arrow" back-button></x-icon>[[localize('general.button.go-back')]]</text-button-element>
                    </app-stage-select>
                    <app-stage-select stage="[[router.stage]]">
                        <campaign-button-element select-on-stage="start" campaign-type="[[campaign.campaignType]]" on-click="toggleCampaign"></campaign-button-element>
                    </app-stage-select>
                </header-section>
                <app-stage-select stage="[[router.stage]]" animation="fade-in" auto-scroll main>
                    <el-contract-start select-on-stage="start" campaign="[[campaign]]"></el-contract-start>
                    <origin-selection select-on-stage="ursprung" campaign="[[campaign]]" origin-list="[[originList]]"></origin-selection>
                    <not-found-component select-on-stage="error not-found"></not-found-component>
                    <x-style-guide select-on-stage="style-guide"></x-style-guide>
                </app-stage-select>
                <app-stage-select stage="[[router.stage]]" footer>
                    <div select-on-stage="start"><text-element footer html="[[campaign.attributes.startFooter]]"></text-element></div>
                    <div select-on-stage="ursprung"><text-element footer>[[localize('origin-selection.footer.text')]]</text-element></div>
                </app-stage-select>
            </context-column>
        </main-content>
    </template>

    <script src="app-component.js"></script>

</dom-module>